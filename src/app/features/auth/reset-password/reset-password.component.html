<section class="min-h-screen bg-white flex items-center justify-center py-16 px-8 sm:px-6 lg:px-14">
    <div class="max-w-md w-full space-y-8">
        <div class="text-center">
            <h1 class="text-4xl font-bold text-gray-600 mt-4">Reset Password</h1>
            <p class="text-gray-500 mt-4">Enter the reset code and your new password</p>
            @if (email) {
              <p class="text-gray-400 mt-2 text-sm">Code sent to: {{ email }}</p>
            }
        </div>

        <div class="bg-white rounded-lg shadow-lg p-8 mt-1">
            <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">

                <!-- Reset Code -->
                <div style="margin-bottom: 1rem;">
                  <label style="display: block; font-size: 0.875rem; font-weight: 500; color: #374151; margin-bottom: 0.5rem;">Reset Code</label>
                  <input formControlName="resetCode" type="text" placeholder="Enter 6-digit reset code" maxlength="6" (input)="onResetCodeInput($event)" style="width: 100%; padding: 0.75rem 1rem; border: 1px solid #d1d5db; border-radius: 0.5rem; outline: none; background: white; letter-spacing: 0.2em; text-align: center;" />
                  @if(resetCode?.invalid && resetCode?.touched) {
                    <div style="color: #ef4444; font-size: 0.875rem; margin-top: 0.25rem;">
                      @if(resetCode?.errors?.['required']) { <p>This field is required</p> }
                      @if(resetCode?.errors?.['minlength']) { <p>Reset code must be at least 6 characters</p> }
                    </div>
                  }
                </div>

                <!-- New Password -->
                <div style="margin-bottom: 1rem;">
                  <label style="display: block; font-size: 0.875rem; font-weight: 500; color: #374151; margin-bottom: 0.5rem;">New Password</label>
                  <input formControlName="newPassword" type="password" placeholder="Enter new password" style="width: 100%; padding: 0.75rem 1rem; border: 1px solid #d1d5db; border-radius: 0.5rem; outline: none; background: white;" />
                  @if(newPassword?.invalid && newPassword?.touched) {
                    <div style="color: #ef4444; font-size: 0.875rem; margin-top: 0.25rem;">
                      @if(newPassword?.errors?.['required']) { <p>This field is required</p> }
                      @if(newPassword?.errors?.['minlength']) { <p>Password must be at least 6 characters</p> }
                    </div>
                  }
                </div>

                <button [disabled]="isLoading || resetPasswordForm.invalid" type="submit" class="btn w-full py-3">
                  @if(isLoading){
                    <i class="fas fa-spinner animate-spin mr-2"></i>
                    Resetting...
                  } @else {
                    <i class="fas fa-key mr-2"></i>
                    Reset Password
                  }
                </button>

                <!-- Resend Code Button -->
                <button type="button" (click)="resendCode()" [disabled]="isResending" class="btn w-full py-3 mt-2 bg-gray-600 hover:bg-gray-700">
                  @if(isResending){
                    <i class="fas fa-spinner animate-spin mr-2"></i>
                    Sending...
                  } @else {
                    <i class="fas fa-paper-plane mr-2"></i>
                    Resend Code
                  }
                </button>
                
                @if(message && messageType === 'error'){
                <p class="text-red-500 text-sm mt-1 text-center">{{message}}</p>
                }
                @if(message && messageType === 'success'){
                    <p class="text-green-800 text-sm mt-1 text-center">{{message}}</p>
                }
                
                <div class="text-center">
                    <p class="text-gray-600">
                        Remember your password? 
                        <a routerLink="/login"
                            class="text-[#1a5b89] hover:text-[#174B78] font-semibold transition-colors duration-300">
                            Back to Login
                        </a>
                    </p>
                </div>

            </form>
        </div>
    </div>
</section>
