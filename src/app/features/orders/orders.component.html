<section class="max-w-6xl mx-auto px-4 py-10">
	<div class="mb-6">
		<h1 class="text-3xl font-bold tracking-tight text-gray-900">My Orders</h1>
		<p class="text-gray-600 mt-1">Track your recent purchases and their delivery status.</p>
	</div>

	<div *ngIf="loading" class="p-4 bg-blue-50 text-blue-700 rounded-md border border-blue-100">Loading orders...</div>
	<div *ngIf="error && !loading" class="p-4 bg-red-50 text-red-700 rounded-md border border-red-100">{{ error }}</div>

	<div *ngIf="!loading && !error && orders?.length === 0" class="p-10 bg-white border border-dashed border-gray-300 rounded-xl text-center">
		<div class="text-4xl mb-2">üõçÔ∏è</div>
		<p class="text-gray-700 font-medium">No orders yet</p>
		<p class="text-gray-500 text-sm">Your orders will appear here after checkout.</p>
	</div>

	<div *ngIf="!loading && !error && orders?.length" class="space-y-6">
		<article *ngFor="let order of orders" class="rounded-xl border border-gray-200 bg-white shadow-sm hover:shadow transition">
			<header class="flex flex-wrap gap-3 justify-between items-center px-5 py-4 border-b bg-gray-50 rounded-t-xl">
				<div class="font-semibold text-gray-800">Order <span class="text-gray-600">#{{ order._id || order.id }}</span></div>
				<div class="flex items-center gap-2">
					<span class="inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium"
						[ngClass]="order.isPaid ? 'bg-green-50 text-green-700 ring-1 ring-green-200' : 'bg-yellow-50 text-yellow-800 ring-1 ring-yellow-200'">
						<i class="fas" [ngClass]="order.isPaid ? 'fa-check-circle mr-1' : 'fa-clock mr-1'"></i>
						{{ order.isPaid ? 'Paid' : 'Payment Pending' }}
					</span>
					<span class="inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium"
						[ngClass]="order.isDelivered ? 'bg-blue-50 text-blue-700 ring-1 ring-blue-200' : 'bg-gray-50 text-gray-700 ring-1 ring-gray-200'">
						<i class="fas" [ngClass]="order.isDelivered ? 'fa-truck mr-1' : 'fa-box mr-1'"></i>
						{{ order.isDelivered ? 'Delivered' : 'Processing' }}
					</span>
					<div class="text-sm text-gray-500">{{ order.createdAt | date:'medium' }}</div>
				</div>
			</header>

			<div class="px-5 py-4 grid md:grid-cols-3 gap-6">
				<div class="md:col-span-2">
					<h3 class="font-semibold text-gray-800 mb-2">Items</h3>
					<div class="divide-y">
						<div *ngFor="let item of order.cartItems" class="py-4 flex items-center gap-4">
							<img [src]="item.product?.imageCover" alt="" class="w-16 h-16 object-cover rounded-md ring-1 ring-gray-200" />
							<div class="flex-1 min-w-0">
								<div class="font-medium text-gray-900 truncate">{{ item.product?.title }}</div>
								<div class="text-sm text-gray-600">Qty: {{ item.count }} √ó {{ item.price | currency:'EGP' }}</div>
							</div>
							<div class="text-sm font-semibold text-gray-900 whitespace-nowrap">
								{{ (item.count * item.price) | currency:'EGP' }}
							</div>
						</div>
					</div>
				</div>

				<div class="space-y-4">
					<div class="rounded-lg border border-gray-200 p-4 bg-gray-50">
						<div class="text-sm text-gray-600 mb-1">Payment</div>
						<div class="font-medium text-gray-900">{{ order.paymentMethodType || order.paymentMethod | titlecase }}</div>
					</div>
					<div class="rounded-lg border border-gray-200 p-4 bg-gray-50">
						<div class="text-sm text-gray-600 mb-1">Shipping Address</div>
						<div class="text-gray-800">
							<div>{{ order.shippingAddress?.details }}</div>
							<div class="text-sm text-gray-600">{{ order.shippingAddress?.city }} ‚Ä¢ {{ order.shippingAddress?.phone }}</div>
						</div>
					</div>
					<div class="rounded-lg border border-gray-200 p-4 bg-white">
						<div class="flex items-center justify-between">
							<div class="text-gray-600">Total</div>
							<div class="text-lg font-semibold text-gray-900">{{ order.totalOrderPrice | currency:'EGP' }}</div>
						</div>
					</div>
				</div>
			</div>
		</article>
	</div>
</section>
